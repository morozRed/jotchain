# SSH Configuration for jotchain_hetzner Production Servers
# This configuration enforces secure access to servers

# Web Server (Public Access Point)
Host jotchain-web
    HostName 49.13.225.64
    User root
    Port 22
    PreferredAuthentications publickey
    IdentityFile ~/.ssh/jotchain_hetzner_ed25519
    IdentitiesOnly yes
    StrictHostKeyChecking yes
    ForwardAgent no
    PasswordAuthentication no

# Accessories Server (Private Network - Only via Jumphost)
# IMPORTANT: This server has no public IP, only accessible via private network
Host jotchain_hetzner-accessories
    HostName 10.0.0.2
    User root
    Port 22
    PreferredAuthentications publickey
    ProxyJump jotchain-web
    IdentityFile ~/.ssh/jotchain_hetzner_ed25519
    IdentitiesOnly yes
    StrictHostKeyChecking yes
    ForwardAgent no
    PasswordAuthentication no

# Convenience alias for database access via SSH tunnel
Host jotchain-db-tunnel
    HostName 49.13.225.64
    User root
    Port 22
    PreferredAuthentications publickey
    IdentityFile ~/.ssh/jotchain_hetzner_ed25519
    LocalForward 5433 10.0.0.2:5432
    LocalForward 6380 10.0.0.2:6379
    IdentitiesOnly yes
    StrictHostKeyChecking yes
    ForwardAgent no
    PasswordAuthentication no

# Default settings for all hosts
Host *
    ServerAliveInterval 60
    ServerAliveCountMax 3
    TCPKeepAlive yes
    Compression yes
    ControlMaster auto
    ControlPath ~/.ssh/control-%h-%p-%r
    ControlPersist 10m
