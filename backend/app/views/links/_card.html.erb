<turbo-frame id="<%= dom_id(link) %>" class="block">
  <article class="group relative overflow-hidden rounded-2xl border border-white/10 bg-slate-900/70 p-5 transition hover:border-indigo-400/30 hover:bg-slate-900/80">
    <div class="flex items-start justify-between gap-4">
      <div>
        <p class="text-xs uppercase tracking-[0.35em] text-slate-500">
          <%= link.recorded_on.strftime("%b %d, %Y") %>
        </p>
        <% if link.title.present? %>
          <h3 class="mt-2 text-lg font-semibold text-white"><%= link.title %></h3>
        <% end %>
      </div>
      <span class="rounded-full border border-white/10 px-3 py-1 text-xs font-semibold text-slate-200/90">
        <%= link.category.titleize %>
      </span>
    </div>

    <p class="mt-3 whitespace-pre-line text-sm leading-6 text-slate-300/90"><%= link.body %></p>

    <% if link.summary.present? %>
      <div class="mt-3 rounded-xl border border-indigo-500/20 bg-indigo-500/10 p-3 text-sm text-indigo-100/80">
        <p class="text-xs font-semibold uppercase tracking-[0.1em] text-indigo-200/80">Snapshot</p>
        <p class="mt-1 text-sm text-indigo-50/80"><%= link.summary %></p>
      </div>
    <% end %>

    <div class="mt-4 flex flex-wrap items-center gap-2 text-xs text-slate-400">
      <% link.tags.each do |tag| %>
        <span class="rounded-full border border-white/10 px-3 py-1 text-[0.75rem] text-slate-200/80">
          #<%= tag %>
        </span>
      <% end %>

      <% link.mentions.each do |mention| %>
        <span class="rounded-full border border-indigo-400/20 bg-indigo-500/10 px-3 py-1 text-[0.75rem] text-indigo-100/80">
          @<%= mention %>
        </span>
      <% end %>
    </div>

    <% if link.linked_chains.any? %>
      <div class="mt-4 rounded-xl border border-white/5 bg-slate-950/60 p-3 text-xs text-slate-300/80">
        <p class="font-semibold text-slate-200/90">Connected chains</p>
        <ul class="mt-2 space-y-1">
          <% link.linked_chains.each do |chain| %>
            <li>
              <%= link_to chain.name, chain_path(chain), data: { turbo_frame: "_top" }, class: "text-indigo-300 hover:text-indigo-200" %>
            </li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <footer class="mt-4 flex items-center justify-between text-xs text-slate-500">
      <div class="flex items-center gap-3">
        <span class="rounded-full border border-white/10 px-3 py-1 text-[0.65rem] uppercase tracking-[0.1em]">
          <%= link.sentiment.capitalize %>
        </span>
        <span><%= link.created_at.strftime("Logged %b %d %H:%M") %></span>
      </div>
      <div class="flex items-center gap-2 opacity-0 transition group-hover:opacity-100">
        <%= link_to "Edit", edit_link_path(link), data: { turbo_frame: "modal" }, class: "rounded-lg border border-white/10 px-3 py-1 text-xs font-medium text-slate-200/80 hover:border-indigo-400/50 hover:text-white" %>
        <%= button_to "Delete", link_path(link), method: :delete, data: { turbo_confirm: "Remove this note?" }, class: "rounded-lg border border-rose-400/40 px-3 py-1 text-xs font-medium text-rose-200/80 hover:bg-rose-500/10" %>
      </div>
    </footer>
  </article>
</turbo-frame>
