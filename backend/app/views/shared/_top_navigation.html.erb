<header class="flex items-center justify-between p-4 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
  <div class="flex items-center gap-4">
    <!-- Logo and current date -->
    <div class="flex items-center gap-4">
      <a href="<%= root_path %>" class="hover:opacity-80 transition-opacity duration-150">
        <span class="text-xl font-mono font-bold text-primary">
          <span class="text-accent">Jot</span>Chain
        </span>
      </a>
      <div class="hidden sm:block text-sm text-text-secondary">
        <%= Date.current.strftime("%A, %B %d, %Y") %>
      </div>
    </div>
  </div>

  <!-- Simplified Center Area -->
  <div class="flex-1 flex justify-center">
    <div class="text-sm text-text-secondary">
      Focus on your daily progress
    </div>
  </div>

  <!-- Right side actions -->
  <div class="flex items-center gap-4">
    <!-- Streak Counter -->
    <div class="flex items-center gap-2 px-3 py-1 rounded-md bg-primary/10 border border-primary/20">
      <svg class="h-4 w-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"></path>
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z"></path>
      </svg>
      <span class="text-sm font-mono font-medium text-primary">
        <%= current_user.current_streak %> day streak
      </span>
    </div>

    <!-- Calendar toggle button -->
    <button data-action="click->sidebar#toggleCalendar"
            data-sidebar-target="calendarToggle"
            class="p-2 rounded-lg hover:bg-background-secondary transition-all duration-150 hover:scale-105"
            title="Toggle Calendar">
      <svg class="w-5 h-5 transition-transform duration-150" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
      </svg>
    </button>

    <!-- User menu dropdown -->
    <div class="relative" data-controller="dropdown">
      <button data-action="click->dropdown#toggle"
              class="flex items-center gap-2 p-2 rounded-lg hover:bg-background-secondary transition-colors">
        <div class="w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center">
          <span class="text-sm font-medium text-primary">
            <%= current_user.email.first.upcase %>
          </span>
        </div>
      </button>
      
      <!-- Dropdown menu -->
      <div data-dropdown-target="menu"
           class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg border border-border z-50">
        <div class="py-1">
          <%= link_to entries_path, class: "block px-4 py-2 text-sm text-text-primary hover:bg-background-secondary flex items-center gap-2" do %>
            <%= heroicon "book-open", options: { class: "w-4 h-4" } %>
            All Entries
          <% end %>
          <%= link_to insights_path, class: "block px-4 py-2 text-sm text-text-primary hover:bg-background-secondary flex items-center gap-2" do %>
            <%= heroicon "light-bulb", options: { class: "w-4 h-4" } %>
            AI Insights
          <% end %>
          <div class="border-t border-border my-1"></div>
          <%= link_to edit_user_registration_path, class: "block px-4 py-2 text-sm text-text-primary hover:bg-background-secondary flex items-center gap-2" do %>
            <%= heroicon "cog-6-tooth", options: { class: "w-4 h-4" } %>
            Settings
          <% end %>
          <%= link_to new_feedback_path, class: "block px-4 py-2 text-sm text-text-primary hover:bg-background-secondary flex items-center gap-2" do %>
            <%= heroicon "chat-bubble-left-right", options: { class: "w-4 h-4" } %>
            Feedback
          <% end %>
          <div class="border-t border-border my-1"></div>
          <%= link_to destroy_user_session_path, data: { turbo_method: :delete }, class: "block px-4 py-2 text-sm text-text-primary hover:bg-background-secondary flex items-center gap-2" do %>
            <%= heroicon "arrow-right-on-rectangle", options: { class: "w-4 h-4" } %>
            Sign Out
          <% end %>
        </div>
      </div>
    </div>
  </div>
</header>
