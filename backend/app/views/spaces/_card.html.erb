<article class="rounded-xl border border-white/10 bg-slate-900/60 p-6 transition hover:border-indigo-400/40">
  <div class="flex flex-wrap items-start justify-between gap-4">
    <div>
      <p class="text-xs uppercase tracking-[0.3em] text-slate-500">Space</p>
      <%= link_to space.name, space_path(space), data: { turbo_frame: "_top" }, class: "mt-1 block text-xl font-semibold text-white hover:text-indigo-200" %>
    </div>
    <div class="flex items-center gap-2 text-xs text-slate-400">
      <span class="rounded-full border border-white/10 px-3 py-1 font-semibold text-slate-200/80"><%= pluralize(space.chains.size, "chain") %></span>
      <span class="rounded-full border border-white/10 px-3 py-1 font-semibold text-slate-200/70"><%= pluralize(space.links.size, "note") %></span>
    </div>
  </div>

  <p class="mt-3 text-sm leading-6 text-slate-300/90"><%= space.description.presence || "Describe what this space is tracking to anchor AI insights later." %></p>

  <% categories = space.categories_with_counts.first(3) %>
  <% if categories.present? %>
    <div class="mt-4 flex flex-wrap gap-2 text-xs text-slate-200/80">
      <% categories.each do |category, count| %>
        <span class="rounded-full border border-white/10 px-3 py-1">
          <%= category.titleize %>
          <span class="text-slate-500">· <%= count %></span>
        </span>
      <% end %>
    </div>
  <% end %>

  <div class="mt-5 flex items-center gap-4 text-xs text-slate-400">
    <p>Last activity: <%= space.links.order(recorded_on: :desc).limit(1).pluck(:recorded_on).first&.strftime("%b %d") || "–" %></p>
    <%= link_to "View space", space_path(space), data: { turbo_frame: "_top" }, class: "inline-flex items-center gap-1 text-indigo-300 hover:text-indigo-200" %>
  </div>
</article>
