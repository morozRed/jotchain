---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

const appSignupUrl = 'https://app.jotchain.com/sign_up';

const testimonials = [
	{
		quote: 'I used to dread performance reviews. Now I just generate a summary and it\'s all there.',
		name: 'Chris',
		role: 'Software Engineer',
	},
	{
		quote: 'Weekly summaries land before my 1:1s. I already know what each person shipped.',
		name: 'Nico',
		role: 'Engineering Manager',
	},
];

const pricing = [
	{
		name: 'Monthly',
		price: '$9',
		period: '/month',
		tagline: '14-day free trial',
		features: ['Unlimited entries', 'AI summaries', 'Scheduled digests'],
		cta: 'Start trial',
		highlighted: false,
	},
	{
		name: 'Yearly',
		price: '$90',
		period: '/year',
		tagline: 'Save $18 per year',
		features: ['Unlimited entries', 'AI summaries', 'Scheduled digests'],
		cta: 'Start trial',
		highlighted: true,
	},
];
---

<Layout>
	<Header />

	<div class="page-wrapper">
		<!-- Hero Section -->
		<section class="hero">
			<div class="hero__content">
				<h1 class="fade-in fade-in-1">
					A work log that turns into updates, reviews, and summaries.
				</h1>
				<p class="hero__subtitle fade-in fade-in-2">
					Keep track of what you actually worked on â€” so performance reviews don't start from memory.
				</p>
				<div class="hero__actions fade-in fade-in-3">
					<a class="button button--primary" href={appSignupUrl}>Start free trial</a>
					<span class="hero__meta">14 days free. No credit card.</span>
				</div>
			</div>
			<div class="hero__visual fade-in fade-in-4">
				<img src="/screenshots/entries-list.png" alt="JotChain work log showing daily entries with @-mentions" loading="eager" />
			</div>
		</section>

		<!-- How It Works Section -->
		<section class="section workflow" id="how-it-works">
			<header class="section__header">
				<h2>Three steps to never blank in a meeting again</h2>
				<p>Takes 2 minutes a day. Saves hours during reviews.</p>
			</header>

			<div class="workflow__steps">
				<article class="workflow__step">
					<span class="workflow__number">1</span>
					<h3>Log what you worked on</h3>
					<p>Quick notes with @mentions for people and projects. No formatting required.</p>
				</article>

				<article class="workflow__step">
					<span class="workflow__number">2</span>
					<h3>Generate summaries when needed</h3>
					<p>Pick a time range, choose a format, let AI do the rest.</p>
				</article>

				<article class="workflow__step">
					<span class="workflow__number">3</span>
					<h3>Share or schedule delivery</h3>
					<p>Copy to clipboard, email yourself, or set up automatic digests.</p>
				</article>
			</div>
		</section>

		<!-- Testimonials Section -->
		<section class="section testimonials">
			<header class="section__header">
				<h2>Works for engineers, managers, and makers</h2>
			</header>

			<div class="testimonials__grid">
				{testimonials.map((t) => (
					<blockquote class="testimonial">
						<p>"{t.quote}"</p>
						<footer>
							<strong>{t.name}</strong>
							<span>{t.role}</span>
						</footer>
					</blockquote>
				))}
			</div>
		</section>

		<!-- Pricing Section -->
		<section class="section pricing-section" id="pricing">
			<header class="section__header">
				<h2>Simple pricing, no surprises</h2>
				<p>Try everything free for 14 days. Cancel anytime.</p>
			</header>

			<div class="pricing__cards">
				{pricing.map((plan) => (
					<article class={`pricing-card ${plan.highlighted ? 'pricing-card--highlighted' : ''}`}>
						<header>
							<h3>{plan.name}</h3>
							<div class="pricing-card__price">
								<span class="pricing-card__amount">{plan.price}</span>
								<span class="pricing-card__period">{plan.period}</span>
							</div>
							<p class="pricing-card__tagline">{plan.tagline}</p>
						</header>
						<ul>
							{plan.features.map((f) => <li>{f}</li>)}
						</ul>
						<a class="button button--primary" href={appSignupUrl}>{plan.cta}</a>
					</article>
				))}
			</div>

			<p class="pricing__note">
				Questions? <a href="mailto:grig@jotchain.com">grig@jotchain.com</a>
			</p>
		</section>

		<!-- Final CTA -->
		<section class="section final-cta">
			<h2>Ready to stop reconstructing your work?</h2>
			<p>Join engineers and managers who never blank in meetings again.</p>
			<a class="button button--primary" href={appSignupUrl}>Start free trial</a>
		</section>
	</div>

	<Footer />
</Layout>

<style>
	.page-wrapper {
		width: 100%;
		max-width: var(--max-width);
		display: flex;
		flex-direction: column;
	}

	/* Hero Section */
	.hero {
		display: grid;
		gap: 3rem;
		align-items: center;
		padding: 4rem 0 5rem;
	}

	@media (min-width: 768px) {
		.hero {
			grid-template-columns: 1.2fr 0.8fr;
			gap: 4rem;
			padding: 5rem 0 6rem;
		}
	}

	.hero__content {
		display: flex;
		flex-direction: column;
		gap: 1.25rem;
	}

	.hero h1 {
		font-size: clamp(1.75rem, 4vw, 2.75rem);
		line-height: 1.15;
		max-width: 540px;
	}

	.hero__subtitle {
		font-size: 1.125rem;
		line-height: 1.6;
		color: var(--text-secondary);
		max-width: 480px;
	}

	.hero__actions {
		display: flex;
		flex-wrap: wrap;
		align-items: center;
		gap: 1rem;
		margin-top: 0.5rem;
	}

	.hero__meta {
		font-size: 0.875rem;
		color: var(--text-muted);
	}

	.hero__visual {
		position: relative;
	}

	.hero__visual::before {
		content: '';
		position: absolute;
		inset: 0;
		background: var(--grain-pattern);
		opacity: 0.03;
		border-radius: var(--radius);
		pointer-events: none;
		z-index: 1;
	}

	.hero__visual img {
		width: 100%;
		height: auto;
		border-radius: var(--radius);
		border: 1px solid var(--border);
		box-shadow:
			0 2px 4px rgba(31, 35, 40, 0.04),
			0 8px 24px rgba(31, 35, 40, 0.08),
			0 24px 48px rgba(31, 35, 40, 0.06);
	}

	/* Workflow Section */
	.workflow__steps {
		display: grid;
		gap: 1.5rem;
		position: relative;
	}

	@media (min-width: 768px) {
		.workflow__steps {
			grid-template-columns: repeat(3, 1fr);
			gap: 2rem;
		}

		/* Connecting dotted line between steps */
		.workflow__steps::before {
			content: '';
			position: absolute;
			top: 44px;
			left: calc(16.67% + 20px);
			right: calc(16.67% + 20px);
			height: 2px;
			border-top: 2px dashed var(--border);
			z-index: 0;
		}
	}

	.workflow__step {
		padding: 1.5rem;
		background: var(--surface);
		border: 1px solid var(--border-subtle);
		border-radius: var(--radius);
		transition: border-color 0.15s ease, transform 0.2s ease;
		position: relative;
		z-index: 1;
		overflow: hidden;
	}

	/* Grain texture */
	.workflow__step::after {
		content: '';
		position: absolute;
		inset: 0;
		background: var(--grain-pattern);
		opacity: 0.04;
		pointer-events: none;
	}

	.workflow__step:hover {
		border-color: var(--border-strong);
	}

	/* Stagger middle card for visual rhythm */
	@media (min-width: 768px) {
		.workflow__step:nth-child(2) {
			transform: translateY(-8px);
		}

		.workflow__step:nth-child(2):hover {
			transform: translateY(-10px);
		}
	}

	.workflow__number {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		width: 40px;
		height: 40px;
		border-radius: 50%;
		background: var(--primary);
		color: var(--primary-foreground);
		font-family: var(--font-heading);
		font-size: 1rem;
		font-weight: 600;
		margin-bottom: 1rem;
		position: relative;
		overflow: hidden;
	}

	.workflow__number::before {
		content: '';
		position: absolute;
		inset: 0;
		background: var(--grain-pattern);
		opacity: 0.25;
		mix-blend-mode: overlay;
	}

	.workflow__step h3 {
		font-family: var(--font-body);
		font-size: 1.0625rem;
		font-weight: 600;
		margin-bottom: 0.5rem;
	}

	.workflow__step p {
		color: var(--text-secondary);
		font-size: 0.95rem;
		line-height: 1.5;
	}

	/* Testimonials Section */
	.testimonials {
		background: var(--subtle);
		width: 100vw;
		margin-left: 50%;
		transform: translateX(-50%);
		padding-left: 1.5rem;
		padding-right: 1.5rem;
		max-width: none;
		position: relative;
	}

	/* Grain texture overlay on testimonials background */
	.testimonials::before {
		content: '';
		position: absolute;
		inset: 0;
		background: var(--grain-pattern);
		opacity: 0.03;
		pointer-events: none;
	}

	@media (min-width: 768px) {
		.testimonials {
			padding-left: 2.5rem;
			padding-right: 2.5rem;
		}
	}

	.testimonials__grid {
		display: grid;
		gap: 1.5rem;
		max-width: 700px;
		margin: 0 auto;
		position: relative;
		z-index: 1;
	}

	@media (min-width: 768px) {
		.testimonials__grid {
			grid-template-columns: repeat(2, 1fr);
		}
	}

	.testimonial {
		padding: 1.75rem;
		background: var(--surface);
		border: 1px solid var(--border-subtle);
		border-radius: var(--radius);
		margin: 0;
		position: relative;
		overflow: hidden;
	}

	/* Grain texture */
	.testimonial::after {
		content: '';
		position: absolute;
		inset: 0;
		background: var(--grain-pattern);
		opacity: 0.05;
		pointer-events: none;
	}

	/* Accent bar on left */
	.testimonial::before {
		content: '';
		position: absolute;
		left: 0;
		top: 0;
		bottom: 0;
		width: 3px;
		background: var(--primary);
		border-radius: 3px 0 0 3px;
	}

	.testimonial p {
		font-size: 1rem;
		line-height: 1.6;
		color: var(--text-primary);
		margin-bottom: 1rem;
	}

	.testimonial footer {
		display: flex;
		flex-direction: column;
		gap: 0.125rem;
	}

	.testimonial strong {
		font-weight: 600;
		color: var(--text-primary);
	}

	.testimonial span {
		font-size: 0.875rem;
		color: var(--text-muted);
		display: flex;
		align-items: center;
		gap: 0.5rem;
	}

	/* Coral dot before role */
	.testimonial span::before {
		content: '';
		width: 4px;
		height: 4px;
		border-radius: 50%;
		background: var(--primary);
		opacity: 0.6;
	}

	/* Pricing Section */
	.pricing__cards {
		display: grid;
		gap: 1.5rem;
		max-width: 640px;
		margin: 0 auto;
	}

	@media (min-width: 640px) {
		.pricing__cards {
			grid-template-columns: repeat(2, 1fr);
		}
	}

	.pricing-card {
		padding: 1.75rem;
		background: var(--surface);
		border: 1px solid var(--border-subtle);
		border-radius: var(--radius);
		display: flex;
		flex-direction: column;
		gap: 1.25rem;
		position: relative;
		overflow: hidden;
	}

	/* Grain texture for pricing cards */
	.pricing-card::after {
		content: '';
		position: absolute;
		inset: 0;
		background: var(--grain-pattern);
		opacity: 0.04;
		pointer-events: none;
	}

	.pricing-card--highlighted {
		border-color: var(--primary);
		border-top: 3px solid var(--primary);
		background: linear-gradient(
			180deg,
			var(--primary-soft-bg) 0%,
			var(--surface) 100%
		);
	}

	/* Best value badge */
	.pricing-card--highlighted::before {
		content: 'Best value';
		position: absolute;
		top: 12px;
		right: 12px;
		background: var(--primary);
		color: var(--primary-foreground);
		font-family: var(--font-heading);
		font-size: 0.6rem;
		text-transform: uppercase;
		letter-spacing: 0.08em;
		padding: 5px 10px;
		border-radius: var(--radius-sm);
	}

	.pricing-card header {
		display: flex;
		flex-direction: column;
		gap: 0.25rem;
	}

	.pricing-card h3 {
		font-family: var(--font-body);
		font-size: 1rem;
		font-weight: 600;
	}

	.pricing-card__price {
		display: flex;
		align-items: baseline;
		gap: 0.125rem;
	}

	.pricing-card__amount {
		font-family: var(--font-heading);
		font-size: 2rem;
		font-weight: 600;
		color: var(--text-primary);
	}

	.pricing-card__period {
		font-size: 0.95rem;
		color: var(--text-muted);
	}

	.pricing-card__tagline {
		font-size: 0.875rem;
		color: var(--text-secondary);
		margin-top: 0.25rem;
	}

	.pricing-card ul {
		list-style: none;
		margin: 0;
		padding: 0;
		display: flex;
		flex-direction: column;
		gap: 0.5rem;
	}

	.pricing-card li {
		display: flex;
		align-items: center;
		gap: 0.5rem;
		font-size: 0.95rem;
		color: var(--text-secondary);
	}

	.pricing-card li::before {
		content: '';
		width: 16px;
		height: 16px;
		border-radius: 50%;
		background: var(--primary-soft-bg);
		background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23D35F3E'%3E%3Cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3E%3C/svg%3E");
		flex-shrink: 0;
	}

	.pricing-card .button {
		margin-top: auto;
	}

	.pricing__note {
		text-align: center;
		margin-top: 2rem;
		font-size: 0.95rem;
		color: var(--text-muted);
	}

	.pricing__note a {
		color: var(--primary);
		font-weight: 500;
	}

	/* Final CTA Section */
	.final-cta {
		text-align: center;
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 1rem;
		padding: 5rem 1.5rem 6rem;
		background:
			radial-gradient(
				100% 50% at 50% 50%,
				var(--primary-soft-bg) 0%,
				transparent 100%
			),
			var(--background);
		width: 100vw;
		margin-left: 50%;
		transform: translateX(-50%);
		max-width: none;
		position: relative;
		border-top: none;
	}

	/* Grain texture overlay */
	.final-cta::before {
		content: '';
		position: absolute;
		inset: 0;
		background: var(--grain-pattern);
		opacity: 0.04;
		pointer-events: none;
	}

	@media (min-width: 768px) {
		.final-cta {
			padding: 5rem 2.5rem 6rem;
		}
	}

	.final-cta h2 {
		font-size: clamp(1.25rem, 3vw, 1.75rem);
		position: relative;
		z-index: 1;
	}

	.final-cta p {
		color: var(--text-secondary);
		font-size: 1.05rem;
		max-width: 400px;
		position: relative;
		z-index: 1;
	}

	.final-cta .button {
		margin-top: 0.5rem;
		position: relative;
		z-index: 1;
		padding: 0.875rem 2rem;
	}
</style>
