---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

const appSignupUrl = 'https://app.jotchain.com/sign_up';

const testimonials = [
	{
		quote: 'I used to dread performance reviews. Now I just generate a summary and it\'s all there.',
		name: 'Chris',
		role: 'Software Engineer',
	},
	{
		quote: 'Weekly summaries land before my 1:1s. I already know what each person shipped.',
		name: 'Nico',
		role: 'Engineering Manager',
	},
];

const pricing = [
	{
		name: 'Monthly',
		price: '$9',
		period: '/month',
		tagline: '14-day free trial',
		features: ['Unlimited entries', 'AI summaries', 'Scheduled digests'],
		cta: 'Start trial',
		highlighted: false,
	},
	{
		name: 'Yearly',
		price: '$90',
		period: '/year',
		tagline: 'Save $18 per year',
		features: ['Unlimited entries', 'AI summaries', 'Scheduled digests'],
		cta: 'Start trial',
		highlighted: true,
	},
];
---

<Layout>
	<Header />

	<div class="page-wrapper">
		<!-- Hero Section -->
		<section class="hero">
			<div class="hero__content">
				<h1 class="fade-in fade-in-1">
					A work log that turns into updates, reviews, and summaries.
				</h1>
				<p class="hero__subtitle fade-in fade-in-2">
					Keep track of what you actually worked on â€” so performance reviews don't start from memory.
				</p>
				<div class="hero__actions fade-in fade-in-3">
					<a class="button button--primary" href={appSignupUrl}>Start free trial</a>
					<span class="hero__meta">14 days free. No credit card.</span>
				</div>
			</div>
			<div class="hero__visual fade-in fade-in-4">
				<img src="/screenshots/hero_screenshot.png" alt="JotChain work log showing daily entries with @-mentions" loading="eager" />
			</div>
		</section>

		<!-- Horizon Separator -->
		<div class="horizon">
			<div class="horizon__edge"></div>
		</div>

		<!-- Features Section -->
		<section class="features" id="features">
			<article class="feature">
				<div class="feature__media">
					<video class="feature__video" autoplay loop muted playsinline>
						<source src="/videos/entry_log.webm" type="video/webm" />
					</video>
				</div>
				<div class="feature__content">
					<h3>Log work as you go</h3>
					<p>Write short notes. Mention people and projects naturally.</p>
				</div>
			</article>

			<article class="feature feature--reversed">
				<div class="feature__media">
					<video class="feature__video" autoplay loop muted playsinline>
						<source src="/videos/perf_rev.webm" type="video/webm" />
					</video>
				</div>
				<div class="feature__content">
					<h3>Performance reviews from real work</h3>
					<p>Draft reviews grounded in what actually happened.</p>
				</div>
			</article>

			<article class="feature">
				<div class="feature__media">
					<video class="feature__video" autoplay loop muted playsinline>
						<source src="/videos/notification.webm" type="video/webm" />
					</video>
				</div>
				<div class="feature__content">
					<h3>Gentle reminders, sent to you</h3>
					<p>Get email digests when you need them.</p>
				</div>
			</article>
		</section>

		<!-- Testimonials Section -->
		<section class="section testimonials">
			<header class="section__header">
				<h2>Works for engineers, managers, and makers</h2>
			</header>

			<div class="testimonials__grid">
				{testimonials.map((t) => (
					<blockquote class="testimonial">
						<p>"{t.quote}"</p>
						<footer>
							<strong>{t.name}</strong>
							<span>{t.role}</span>
						</footer>
					</blockquote>
				))}
			</div>
		</section>

		<!-- Pricing Section -->
		<section class="section pricing-section" id="pricing">
			<header class="section__header">
				<h2>Simple pricing, no surprises</h2>
				<p>Try everything free for 14 days. Cancel anytime.</p>
			</header>

			<div class="pricing__cards">
				{pricing.map((plan) => (
					<article class={`pricing-card ${plan.highlighted ? 'pricing-card--highlighted' : ''}`}>
						<header>
							<h3>{plan.name}</h3>
							<div class="pricing-card__price">
								<span class="pricing-card__amount">{plan.price}</span>
								<span class="pricing-card__period">{plan.period}</span>
							</div>
							<p class="pricing-card__tagline">{plan.tagline}</p>
						</header>
						<ul>
							{plan.features.map((f) => <li>{f}</li>)}
						</ul>
						<a class="button button--primary" href={appSignupUrl}>{plan.cta}</a>
					</article>
				))}
			</div>

			<p class="pricing__note">
				Questions? <a href="mailto:grig@jotchain.com">grig@jotchain.com</a>
			</p>
		</section>

		<!-- Final CTA -->
		<section class="section final-cta">
			<h2>Ready to stop reconstructing your work?</h2>
			<p>Join engineers and managers who never blank in meetings again.</p>
			<a class="button button--primary" href={appSignupUrl}>Start free trial</a>
		</section>
	</div>

	<Footer />
</Layout>

<style>
	.page-wrapper {
		width: 100%;
		max-width: var(--max-width);
		display: flex;
		flex-direction: column;
	}

	/* Hero Section - Centered */
	.hero {
		display: flex;
		flex-direction: column;
		align-items: center;
		text-align: center;
		gap: 3rem;
		padding: 4rem 0 0;
	}

	@media (min-width: 768px) {
		.hero {
			padding: 5rem 0 0;
		}
	}

	.hero__content {
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 1.25rem;
	}

	.hero h1 {
		font-size: clamp(1.75rem, 4vw, 2.75rem);
		line-height: 1.15;
		max-width: 700px;
	}

	.hero__subtitle {
		font-size: 1.125rem;
		line-height: 1.6;
		color: var(--text-secondary);
		max-width: 540px;
	}

	.hero__actions {
		display: flex;
		flex-wrap: wrap;
		align-items: center;
		justify-content: center;
		gap: 1rem;
		margin-top: 0.5rem;
	}

	.hero__meta {
		font-size: 0.875rem;
		color: var(--text-muted);
	}

	.hero__visual {
		position: relative;
		width: 100%;
		max-width: 1100px;
		z-index: 10;
	}

	.hero__visual::before {
		content: '';
		position: absolute;
		inset: 0;
		background: var(--grain-pattern);
		opacity: 0.03;
		border-radius: var(--radius) var(--radius) 0 0;
		pointer-events: none;
		z-index: 1;
	}

	/* Gradient fade at bottom */
	.hero__visual::after {
		content: '';
		position: absolute;
		bottom: 0;
		left: 0;
		right: 0;
		height: 180px;
		background: linear-gradient(to bottom, transparent 0%, var(--background) 100%);
		pointer-events: none;
		z-index: 2;
	}

	.hero__visual img {
		width: 100%;
		height: auto;
		border-radius: var(--radius) var(--radius) 0 0;
		border: 1px solid var(--border);
		border-bottom: none;
		/* Shadow only on top and sides using inset positioning */
		box-shadow:
			0 -4px 8px rgba(31, 35, 40, 0.02),
			-8px 0 16px rgba(31, 35, 40, 0.04),
			8px 0 16px rgba(31, 35, 40, 0.04),
			0 -8px 24px rgba(31, 35, 40, 0.06);
	}

	/* Horizon Separator - the "shelf" the screenshot emerges from */
	.horizon {
		position: relative;
		width: 100vw;
		margin-left: 50%;
		transform: translateX(-50%);
		margin-top: -100px;
		padding-top: 100px;
		background: linear-gradient(
			to bottom,
			var(--background) 0%,
			var(--subtle) 100%
		);
	}

	@media (min-width: 768px) {
		.horizon {
			margin-top: -140px;
			padding-top: 140px;
		}
	}

	.horizon__edge {
		height: 1px;
		background: linear-gradient(
			90deg,
			transparent 0%,
			var(--border) 20%,
			var(--border) 80%,
			transparent 100%
		);
		position: relative;
	}

	/* Soft glow beneath the edge */
	.horizon__edge::after {
		content: '';
		position: absolute;
		top: 0;
		left: 10%;
		right: 10%;
		height: 40px;
		background: radial-gradient(
			ellipse 60% 100% at 50% 0%,
			rgba(211, 95, 62, 0.06) 0%,
			transparent 70%
		);
		pointer-events: none;
	}

	/* Features Section */
	.features {
		display: flex;
		flex-direction: column;
		gap: 4rem;
		background: var(--subtle);
		width: 100vw;
		margin-left: 50%;
		transform: translateX(-50%);
		padding: 4rem 1.5rem 5rem;
		border-top: none;
		position: relative;
	}

	/* Grain texture on features background */
	.features::before {
		content: '';
		position: absolute;
		inset: 0;
		background: var(--grain-pattern);
		opacity: 0.03;
		pointer-events: none;
	}

	@media (min-width: 768px) {
		.features {
			gap: 5rem;
			padding: 4rem 2.5rem 5rem;
		}
	}

	.features .feature {
		max-width: var(--max-width);
		margin: 0 auto;
		width: 100%;
		position: relative;
		z-index: 1;
	}

	.feature {
		display: grid;
		gap: 2rem;
		align-items: center;
	}

	@media (min-width: 768px) {
		.feature {
			grid-template-columns: 1.3fr 0.7fr;
			gap: 3rem;
		}

		.feature--reversed {
			grid-template-columns: 0.7fr 1.3fr;
		}

		.feature--reversed .feature__media {
			order: 2;
		}

		.feature--reversed .feature__content {
			order: 1;
		}
	}

	.feature__media {
		position: relative;
		padding: 1.5rem;
	}

	/* Ambient glow behind video */
	.feature__media::before {
		content: '';
		position: absolute;
		inset: 2rem;
		background: linear-gradient(135deg,
			rgba(100, 180, 220, 0.25) 0%,
			rgba(180, 140, 200, 0.2) 50%,
			rgba(100, 200, 160, 0.15) 100%
		);
		filter: blur(40px);
		border-radius: 2rem;
		z-index: 0;
		opacity: 0.8;
	}

	.feature__video,
	.feature__video-placeholder {
		position: relative;
		z-index: 1;
		width: 100%;
		aspect-ratio: 16 / 10;
		background: var(--surface);
		border: 1px solid var(--border-subtle);
		border-radius: var(--radius);
		object-fit: cover;
		box-shadow:
			0 4px 8px rgba(31, 35, 40, 0.06),
			0 12px 24px rgba(31, 35, 40, 0.1),
			0 24px 48px rgba(31, 35, 40, 0.08);
		transform: rotate(-1deg);
		transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1),
		            box-shadow 0.3s ease;
	}

	.feature--reversed .feature__video,
	.feature--reversed .feature__video-placeholder {
		transform: rotate(1deg);
	}

	.feature__media:hover .feature__video,
	.feature__media:hover .feature__video-placeholder {
		transform: rotate(0deg) translateY(-4px);
		box-shadow:
			0 8px 16px rgba(31, 35, 40, 0.08),
			0 20px 40px rgba(31, 35, 40, 0.12),
			0 32px 64px rgba(31, 35, 40, 0.1);
	}

	.feature__video-placeholder {
		position: relative;
		overflow: hidden;
	}

	.feature__video-placeholder::after {
		content: '';
		position: absolute;
		inset: 0;
		background: var(--grain-pattern);
		opacity: 0.04;
		pointer-events: none;
	}

	.feature__content {
		display: flex;
		flex-direction: column;
		gap: 0.75rem;
	}

	.feature__content h3 {
		font-size: clamp(1.25rem, 2.5vw, 1.5rem);
		line-height: 1.2;
	}

	.feature__content p {
		font-size: 1.05rem;
		line-height: 1.6;
		color: var(--text-secondary);
		max-width: 400px;
	}

	/* Testimonials Section */
	.testimonials {
		background: var(--subtle);
		width: 100vw;
		margin-left: 50%;
		transform: translateX(-50%);
		padding-left: 1.5rem;
		padding-right: 1.5rem;
		max-width: none;
		position: relative;
	}

	/* Grain texture overlay on testimonials background */
	.testimonials::before {
		content: '';
		position: absolute;
		inset: 0;
		background: var(--grain-pattern);
		opacity: 0.03;
		pointer-events: none;
	}

	@media (min-width: 768px) {
		.testimonials {
			padding-left: 2.5rem;
			padding-right: 2.5rem;
		}
	}

	.testimonials__grid {
		display: grid;
		gap: 1.5rem;
		max-width: 700px;
		margin: 0 auto;
		position: relative;
		z-index: 1;
	}

	@media (min-width: 768px) {
		.testimonials__grid {
			grid-template-columns: repeat(2, 1fr);
		}
	}

	.testimonial {
		padding: 1.75rem;
		background: var(--surface);
		border: 1px solid var(--border-subtle);
		border-radius: var(--radius);
		margin: 0;
		position: relative;
		overflow: hidden;
	}

	/* Grain texture */
	.testimonial::after {
		content: '';
		position: absolute;
		inset: 0;
		background: var(--grain-pattern);
		opacity: 0.05;
		pointer-events: none;
	}

	/* Accent bar on left */
	.testimonial::before {
		content: '';
		position: absolute;
		left: 0;
		top: 0;
		bottom: 0;
		width: 3px;
		background: var(--primary);
		border-radius: 3px 0 0 3px;
	}

	.testimonial p {
		font-size: 1rem;
		line-height: 1.6;
		color: var(--text-primary);
		margin-bottom: 1rem;
	}

	.testimonial footer {
		display: flex;
		flex-direction: column;
		gap: 0.125rem;
	}

	.testimonial strong {
		font-weight: 600;
		color: var(--text-primary);
	}

	.testimonial span {
		font-size: 0.875rem;
		color: var(--text-muted);
		display: flex;
		align-items: center;
		gap: 0.5rem;
	}

	/* Coral dot before role */
	.testimonial span::before {
		content: '';
		width: 4px;
		height: 4px;
		border-radius: 50%;
		background: var(--primary);
		opacity: 0.6;
	}

	/* Pricing Section */
	.pricing__cards {
		display: grid;
		gap: 1.5rem;
		max-width: 640px;
		margin: 0 auto;
	}

	@media (min-width: 640px) {
		.pricing__cards {
			grid-template-columns: repeat(2, 1fr);
		}
	}

	.pricing-card {
		padding: 1.75rem;
		background: var(--surface);
		border: 1px solid var(--border-subtle);
		border-radius: var(--radius);
		display: flex;
		flex-direction: column;
		gap: 1.25rem;
		position: relative;
		overflow: hidden;
	}

	/* Grain texture for pricing cards */
	.pricing-card::after {
		content: '';
		position: absolute;
		inset: 0;
		background: var(--grain-pattern);
		opacity: 0.04;
		pointer-events: none;
	}

	.pricing-card--highlighted {
		border-color: var(--primary);
		border-top: 3px solid var(--primary);
		background: linear-gradient(
			180deg,
			var(--primary-soft-bg) 0%,
			var(--surface) 100%
		);
	}

	/* Best value badge */
	.pricing-card--highlighted::before {
		content: 'Best value';
		position: absolute;
		top: 12px;
		right: 12px;
		background: var(--primary);
		color: var(--primary-foreground);
		font-family: var(--font-heading);
		font-size: 0.6rem;
		text-transform: uppercase;
		letter-spacing: 0.08em;
		padding: 5px 10px;
		border-radius: var(--radius-sm);
	}

	.pricing-card header {
		display: flex;
		flex-direction: column;
		gap: 0.25rem;
	}

	.pricing-card h3 {
		font-family: var(--font-body);
		font-size: 1rem;
		font-weight: 600;
	}

	.pricing-card__price {
		display: flex;
		align-items: baseline;
		gap: 0.125rem;
	}

	.pricing-card__amount {
		font-family: var(--font-heading);
		font-size: 2rem;
		font-weight: 600;
		color: var(--text-primary);
	}

	.pricing-card__period {
		font-size: 0.95rem;
		color: var(--text-muted);
	}

	.pricing-card__tagline {
		font-size: 0.875rem;
		color: var(--text-secondary);
		margin-top: 0.25rem;
	}

	.pricing-card ul {
		list-style: none;
		margin: 0;
		padding: 0;
		display: flex;
		flex-direction: column;
		gap: 0.5rem;
	}

	.pricing-card li {
		display: flex;
		align-items: center;
		gap: 0.5rem;
		font-size: 0.95rem;
		color: var(--text-secondary);
	}

	.pricing-card li::before {
		content: '';
		width: 16px;
		height: 16px;
		border-radius: 50%;
		background: var(--primary-soft-bg);
		background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23D35F3E'%3E%3Cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3E%3C/svg%3E");
		flex-shrink: 0;
	}

	.pricing-card .button {
		margin-top: auto;
	}

	.pricing__note {
		text-align: center;
		margin-top: 2rem;
		font-size: 0.95rem;
		color: var(--text-muted);
	}

	.pricing__note a {
		color: var(--primary);
		font-weight: 500;
	}

	/* Final CTA Section */
	.final-cta {
		text-align: center;
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 1rem;
		padding: 5rem 1.5rem 6rem;
		background:
			radial-gradient(
				100% 50% at 50% 50%,
				var(--primary-soft-bg) 0%,
				transparent 100%
			),
			var(--background);
		width: 100vw;
		margin-left: 50%;
		transform: translateX(-50%);
		max-width: none;
		position: relative;
		border-top: none;
	}

	/* Grain texture overlay */
	.final-cta::before {
		content: '';
		position: absolute;
		inset: 0;
		background: var(--grain-pattern);
		opacity: 0.04;
		pointer-events: none;
	}

	@media (min-width: 768px) {
		.final-cta {
			padding: 5rem 2.5rem 6rem;
		}
	}

	.final-cta h2 {
		font-size: clamp(1.25rem, 3vw, 1.75rem);
		position: relative;
		z-index: 1;
	}

	.final-cta p {
		color: var(--text-secondary);
		font-size: 1.05rem;
		max-width: 400px;
		position: relative;
		z-index: 1;
	}

	.final-cta .button {
		margin-top: 0.5rem;
		position: relative;
		z-index: 1;
		padding: 0.875rem 2rem;
	}
</style>
