---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';

const useCases = await getCollection('use-cases');
const sortedUseCases = useCases.sort((a, b) => a.data.name.localeCompare(b.data.name));
const appSignupUrl = 'https://app.jotchain.com/sign_up';

const useCaseIcons: Record<string, string> = {
	'async-team-updates': `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a2 2 0 01-2-2v-1"/><path d="M3 6a2 2 0 012-2h8a2 2 0 012 2v6a2 2 0 01-2 2h-4l-4 4v-4H5a2 2 0 01-2-2V6z"/></svg>`,
	'meeting-prep': `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/><path d="M8 14h.01M12 14h.01M16 14h.01M8 18h.01M12 18h.01"/></svg>`,
	'performance-reviews': `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>`,
};
---

<Layout
	title="Use Cases | JotChain"
	description="Discover how JotChain helps with performance reviews, async team updates, meeting prep, and more."
>
	<Header />

	<div class="page-wrapper">
		<!-- Hero Section -->
		<section class="hero">
			<div class="hero__content">
				<span class="hero__label">Use Cases</span>
				<h1 class="fade-in fade-in-1">How teams use Jotchain</h1>
				<p class="hero__subtitle fade-in fade-in-2">
					From async standups to performance reviews, Jotchain adapts to your workflow.
					Capture daily work, surface patterns, and walk into every meeting prepared.
				</p>
			</div>
		</section>

		<!-- Use Cases Grid -->
		<section class="use-cases">
			<div class="use-cases__grid">
				{sortedUseCases.map((useCase, index) => (
					<a href={`/use-cases/${useCase.slug}`} class={`use-case-card fade-in fade-in-${index + 2}`}>
						<div class="use-case-card__icon" set:html={useCaseIcons[useCase.slug] || useCaseIcons['performance-reviews']} />
						<div class="use-case-card__content">
							<h2>{useCase.data.name}</h2>
							<p>{useCase.data.metaDescription}</p>
						</div>
						<span class="use-case-card__arrow">
							<svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5">
								<path d="M4 10h12M12 6l4 4-4 4"/>
							</svg>
						</span>
					</a>
				))}
			</div>
		</section>

		<!-- How It Works -->
		<section class="workflow">
			<header class="section__header">
				<span class="section__label">The workflow</span>
				<h2>Simple by design</h2>
				<p>No matter your use case, the pattern stays the same.</p>
			</header>

			<div class="workflow__steps">
				<div class="workflow__step">
					<span class="workflow__number">1</span>
					<div class="workflow__text">
						<h3>Capture as you go</h3>
						<p>Quick notes when things happen. No formatting required.</p>
					</div>
				</div>
				<div class="workflow__connector"></div>
				<div class="workflow__step">
					<span class="workflow__number">2</span>
					<div class="workflow__text">
						<h3>Patterns emerge</h3>
						<p>Jotchain watches for repetition and surfaces signals.</p>
					</div>
				</div>
				<div class="workflow__connector"></div>
				<div class="workflow__step">
					<span class="workflow__number">3</span>
					<div class="workflow__text">
						<h3>Summaries write themselves</h3>
						<p>When you need an update, the story is already there.</p>
					</div>
				</div>
			</div>
		</section>

		<!-- CTA Section -->
		<section class="cta-section">
			<div class="cta-section__content">
				<h2>Start capturing your work</h2>
				<p>14-day free trial. No credit card required.</p>
				<a class="button button--primary" href={appSignupUrl}>Start free trial</a>
			</div>
		</section>
	</div>

	<Footer />
</Layout>

<style>
	.page-wrapper {
		width: 100%;
		max-width: var(--max-width);
		display: flex;
		flex-direction: column;
	}

	/* Hero Section */
	.hero {
		padding: 5rem 0 4rem;
		text-align: center;
	}

	.hero__content {
		max-width: 640px;
		margin: 0 auto;
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 1.25rem;
	}

	.hero__label {
		display: inline-block;
		font-family: var(--font-heading);
		font-size: 0.7rem;
		font-weight: 500;
		text-transform: uppercase;
		letter-spacing: 0.12em;
		color: var(--primary);
		padding: 0.5rem 1rem;
		background: var(--primary-soft-bg);
		border: 1px solid var(--primary-soft-border);
		border-radius: 2rem;
	}

	.hero h1 {
		font-size: clamp(2rem, 5vw, 2.75rem);
		line-height: 1.15;
		letter-spacing: -0.02em;
	}

	.hero__subtitle {
		font-size: 1.1rem;
		line-height: 1.7;
		color: var(--text-secondary);
		max-width: 520px;
	}

	/* Section Label */
	.section__label {
		display: inline-block;
		font-family: var(--font-heading);
		font-size: 0.7rem;
		font-weight: 500;
		text-transform: uppercase;
		letter-spacing: 0.12em;
		color: var(--primary);
		margin-bottom: 0.75rem;
		position: relative;
		padding-left: 1.5rem;
	}

	.section__label::before {
		content: '';
		position: absolute;
		left: 0;
		top: 50%;
		transform: translateY(-50%);
		width: 1rem;
		height: 1px;
		background: var(--primary);
		opacity: 0.5;
	}

	.section__header {
		text-align: center;
		max-width: 480px;
		margin: 0 auto 3rem;
	}

	.section__header h2 {
		font-size: clamp(1.5rem, 3vw, 2rem);
		margin-bottom: 0.75rem;
	}

	.section__header p {
		color: var(--text-secondary);
		font-size: 1.05rem;
		line-height: 1.6;
	}

	/* Use Cases Grid */
	.use-cases {
		padding: 2rem 0 5rem;
	}

	.use-cases__grid {
		display: flex;
		flex-direction: column;
		gap: 1rem;
		max-width: 720px;
		margin: 0 auto;
	}

	.use-case-card {
		display: flex;
		align-items: center;
		gap: 1.25rem;
		padding: 1.5rem 1.75rem;
		background: var(--surface);
		border: 1px solid var(--border-subtle);
		border-radius: var(--radius);
		transition: all 0.2s ease;
		text-decoration: none;
	}

	.use-case-card:hover {
		border-color: var(--primary);
		box-shadow: 0 0 0 3px var(--primary-soft-bg);
		transform: translateX(4px);
	}

	.use-case-card:hover .use-case-card__arrow {
		opacity: 1;
		transform: translateX(0);
	}

	.use-case-card__icon {
		flex-shrink: 0;
		width: 3rem;
		height: 3rem;
		border-radius: 0.75rem;
		background: var(--primary-soft-bg);
		border: 1px solid var(--primary-soft-border);
		display: flex;
		align-items: center;
		justify-content: center;
		color: var(--primary);
	}

	.use-case-card__content {
		flex: 1;
		min-width: 0;
	}

	.use-case-card__content h2 {
		font-size: 1.125rem;
		font-family: var(--font-heading);
		margin-bottom: 0.35rem;
		color: var(--text-primary);
	}

	.use-case-card__content p {
		font-size: 0.9rem;
		line-height: 1.5;
		color: var(--text-secondary);
		margin: 0;
	}

	.use-case-card__arrow {
		flex-shrink: 0;
		color: var(--primary);
		opacity: 0;
		transform: translateX(-8px);
		transition: all 0.2s ease;
	}

	/* Workflow Section */
	.workflow {
		padding: 5rem 0;
		background: var(--subtle);
		width: 100vw;
		margin-left: 50%;
		transform: translateX(-50%);
		border-top: 1px solid var(--border-subtle);
		border-bottom: 1px solid var(--border-subtle);
	}

	.workflow__steps {
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 0;
		max-width: 480px;
		margin: 0 auto;
		padding: 0 1.5rem;
	}

	@media (min-width: 768px) {
		.workflow__steps {
			flex-direction: row;
			align-items: flex-start;
			gap: 0;
			max-width: var(--max-width);
			padding: 0 2.5rem;
		}
	}

	.workflow__step {
		display: flex;
		flex-direction: column;
		align-items: center;
		text-align: center;
		flex: 1;
		padding: 1.5rem;
	}

	.workflow__number {
		width: 2.5rem;
		height: 2.5rem;
		border-radius: 50%;
		background: var(--surface);
		border: 2px solid var(--primary);
		display: flex;
		align-items: center;
		justify-content: center;
		font-family: var(--font-heading);
		font-size: 0.9rem;
		font-weight: 600;
		color: var(--primary);
		margin-bottom: 1rem;
	}

	.workflow__text h3 {
		font-size: 1rem;
		font-family: var(--font-heading);
		margin-bottom: 0.5rem;
	}

	.workflow__text p {
		font-size: 0.9rem;
		line-height: 1.6;
		color: var(--text-secondary);
		margin: 0;
	}

	.workflow__connector {
		width: 1px;
		height: 2rem;
		background: var(--border);
	}

	@media (min-width: 768px) {
		.workflow__connector {
			width: 3rem;
			height: 1px;
			margin-top: 2.75rem;
		}
	}

	/* CTA Section */
	.cta-section {
		padding: 5rem 0 6rem;
		text-align: center;
	}

	.cta-section__content {
		max-width: 480px;
		margin: 0 auto;
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 1rem;
	}

	.cta-section__content h2 {
		font-size: clamp(1.5rem, 3vw, 2rem);
	}

	.cta-section__content p {
		color: var(--text-secondary);
		font-size: 1.05rem;
	}

	.cta-section__content .button {
		margin-top: 0.5rem;
	}
</style>
